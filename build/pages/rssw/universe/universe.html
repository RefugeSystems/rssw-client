<div class="rssw-page page-universe">
	<div v-if="!$route.params.oid">
		<div class="title">
			Galactic Index
			<button class="fas fa-sync" v-on:click="resetHeaders()">Headers</button>
		</div>
		
		<div class="index">
			<div class="controls">
				<rs-table-controls class="index" :universe="universe" :corpus="corpus" :user="player" :index="state.activeIndex?universe.indexes[state.activeIndex]:universe.index" :state="state" :options="state.indexOptions" v-on:action="processAction"></rs-table-controls>
				
				<select v-model="command" v-on:change="processCommand(command)" v-if="showCommands()">
					<option value="">Choose Action</option>
					<option disabled value="div">-- Dashboards --</option>
					<option value="dashboard-ships">Dashboard: Ships</option>
					<option disabled value="div">-- Items --</option>
					<option value="spawn">Spawn Template Entities</option>
					<option value="give">Give Items</option>
					<option value="take">Take Items</option>
					<option disabled value="div">-- Records --</option>
					<option value="obscure">Obscure Record</option>
					<option value="unobscure">Unobscure Record</option>
					<option disabled value="div">-- Clean --</option>
					<option value="drop">Delete Objects</option>
				</select>
				<select v-model="target">
					<option value="">No Target</option>
					<option v-for="en in universe.indexes.entity.listing" :value="en.id">{{en.name}}</option>
					<option disabled value="div">-- Player Divide --</option>
					<option v-for="pl in universe.indexes.player.listing" :value="pl.id">{{pl.name}}</option>
					<option disabled value="div">-- Item Divide --</option>
					<option v-for="it in universe.indexes.item.listing" :value="it.id" v-if="!it.template">{{it.name}}</option>
				</select>
				
				<select v-model="state.activeIndex">
					<option value>All</option>
					<option v-for="index in availableIndexes" :value="index">{{index}}</option>
				</select>
				<select v-model.number="state.paging.spread">
					<option v-for="spread in getSpread()" :value="spread">{{spread}}</option>
				</select>
				<select v-model="state.filterTemplate">
					<option value="shown">Shown</option>
					<option value="only">Only</option>
					<option value="out">Out</option>
				</select>
			</div>
			<rs-table class="index" :universe="universe" :user="player" :corpus="corpus" :index="state.activeIndex?universe.indexes[state.activeIndex]:universe.index" :headers="state.headers" :state="state" :options="state.indexOptions"></rs-table>
			<rs-table-paging class="index" :universe="universe" :user="player" :index="state.activeIndex?universe.indexes[state.activeIndex]:universe.index" :state="state" :options="state.indexOptions" v-on:action="processAction"></rs-table-paging>
		</div>
		
		<div class="control">
			<div class="title">
				<input class="filter" v-model="state.search" />
			</div>
			<div class="entities">
				<router-link class="entity navigation-button" v-for="entity in universe.indexes.entity.listing" :to="'/universe/' + entity.classification + '/' + entity.id" :key="entity.id" v-if="filtered(entity)">
					<span class="link-icon" :class="entity.icon || 'fas fa-user-circle'"></span>
					<span class="link-label">{{entity.name}}</span>
				</router-link>
				<router-link class="entity navigation-button create-npc" to="/construct/character">
					<span class="link-icon fas fa-user-plus"></span>
					<span class="link-label">Construct NPC</span>
				</router-link>
			</div>
		</div>
	</div>
	
	<router-view class="system-view opened" :universe="universe" :user="player" :class="$route.params.oid?'loaded':''"></router-view>
</div>
